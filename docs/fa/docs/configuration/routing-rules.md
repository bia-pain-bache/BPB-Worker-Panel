# :material-cog-outline:{ .md .middle } قوانین مسیریابی یا Routing Rules

![Routing Rules](../images/routing-rules.jpg)

## قوانین از پیش تعریف‌شده

با استفاده از قوانین مسیریابی از پیش تعریف‌شده، می‌تونید این تنظیمات رو برای کانفیگ‌ها اعمال کنید:

* اتصال مستقیم به آدرس‌های ایرانی بدون پراکسی (نیازی به قطع اتصال برای بازدید از بعضی وب‌سایت‌ها، به‌ویژه درگاه‌های پرداخت، نیست).
* دسترسی مستقیم به وب‌سایت‌های چینی.
* دسترسی مستقیم به وب‌سایت‌های روسی.
* مسدود کردن تبلیغات ایرانی و خارجی، تا 90 درصد.
* مسدود کردن وب‌سایت‌های محتوای پورن.
* مسدود کردن اتصال‌های QUIC (به دلیل ناپایداری شبکه).
* مسدود کردن محتوای Malware یا بدافزارها
* مسدود کردن محتوای Phishing یا کلاهبرداری
* مسدود کردن محتوای Cryptominers

اتصال مستقیم به آدرس‌های Local مثل 127.0.0.1 به صورت پیشفرض روی کانفیگ‌ها هست و نیازی به تنظیم نداره.

!!! warning "هشدار"
    کاربرای v2ray در صورتی که میخوان از گزینه‌های `Malware`، `Phishing` یا `Cryptominers` استفاده کنن، باید Geo Asset رو به **Chocolate4U** تغییر بدن و asset رو دانلود کنن، در غیر اینصورت کانفیگا وصل نمیشه.

!!! warning "هشدار"
    اگه قوانین مسیریابی رو فعال کنید و برنامه وصل نشه، دلیل اصلیش اینه که Geo asset به‌روز نیست. توی منوی v2rayNG به تنظیمات Geo assets برید و روی آیکون ابر یا دانلود کلیک کنید تا به‌روز بشه. اگه فرآیند به‌روزرسانی موفق نباشه، نمی‌تونید وصل بشید. اگه همه‌چیز رو امتحان کردید و بازم به‌روز نشد، دو فایل زیر رو از لینک‌ها دانلود کنید و به جای دکمه به‌روزرسانی، روی دکمه افزودن کلیک کنید و این دو فایل رو وارد کنید:

```title="GeoIP"
https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geoip.dat
```

```title="GeoSite"
https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geosite.dat
```

## قوانین سفارشی یا Custom Rules

بعضی وقت‌ها قوانین از پیش تعریف‌شده کافی نیستن. مثلاً، اگه محتوای پورن رو مسدود کردید ولی یه وب‌سایت خاص توی لیست نبود و مسدود نشده، باید از قوانین سفارشی استفاده کنید.

توی این بخش می‌تونید از سه فرمت مختلف استفاده کنید: دامنه، IP یا IP/CIDR.

توجه کنید که اگه `google.com` رو وارد کنید، همه زیردامنه‌هاش هم مسدود می‌شن یا مستقیم مسیریابی می‌شن، مثل `drive.google.com` یا `mail.google.com`. مثال‌ها:

```title="دامنه"
google.com
```

```title="IPv4"
192.168.1.1
```

```title="IPv6"
[2606:4700::6810:85e5]
```

```title="محدوده IPv4"
192.168.1.1/32
```

```title="محدوده IPv6"
[2606:4700::6810:85e5]/128
```

## قوانین تحریم‌ها

در صورتی که میخواید وب‌سایت‌های تحریمی رو مستقیم دور بزنید، می‌تونید از این بخش استفاده کنید. حتی با استفاده از کانفیگ Workerless یا کانفیگای Warp که IP ایران برمیگردونن و سایتای تحریمی باز نمیشه.

می‌تونید سرور DNS تحریم‌شکن مدنظرتون رو [در تنظیمات عمومی](./common.md) تغییر بدید و قوانین از پیش تعیین شده رو انتخاب کنید یا آدرس‌های سفارشی رو وارد کنید.

!!! info "راهنمایی"
    توجه کنید که اگه توی قوانین سفارشی `google.com` رو وارد کنید، همه زیر دامنه‌هاش مثل `drive.google.com` یا `mail.google.com` هم مستقیم مسیریابی می‌شن.

!!! note "یادداشت"
    وقتی یک قانون یا دامنه رو در این قسمت برای دور زدن تحریمها فعال میکنید، باید قبلش مطمئن بشید اون DNS این دامنه‌ها رو پشتیبانی میکنه. برای مثال ممکنه دامنه‌های Microsoft رو فعال کنید ولی DNS پیشفرض این دامنه‌ها رو پشتیبانی نکنه. برای اطمینان قبل از فعال کردن یک قانون یا وارد کردن دامنه، به وبسایت اون DNS برید و دامنه رو سرچ کنید تا از پشتیبانی اون دامنه مطمئن باشید.
